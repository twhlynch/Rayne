cmake_minimum_required(VERSION 2.8.4)
project(Rayne-Vendor)

#Force better default values.
option(JANSSON_BUILD_DOCS "Build documentation (uses python-sphinx)." OFF)
option(PNG_SHARED "Build shared lib" OFF)
option(PNG_TESTS "Build libpng tests" OFF)

add_subdirectory("zlib")
add_subdirectory("jansson")
add_subdirectory("libpng")

#Exclude all unused targets from normal build
set_target_properties(example PROPERTIES EXCLUDE_FROM_ALL TRUE)
set_target_properties(example PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
set_target_properties(minigzip PROPERTIES EXCLUDE_FROM_ALL TRUE)
set_target_properties(minigzip PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
if(HAVE_OFF64_T)
    set_target_properties(example64 PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(example64 PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(minigzip64 PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(minigzip64 PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
endif()
if(BUILD_UNIT_TESTS)
    set_target_properties(objectTests PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(objectTests PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
endif()
if(NOT JANSSON_WITHOUT_TESTS)
    set_target_properties(json_process PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(json_process PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_array PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_array PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_copy PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_copy PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_dump PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_dump PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_dump_callback PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_dump_callback PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_equal PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_equal PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_load PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_load PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_loadb PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_loadb PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_number PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_number PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_object PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_object PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_pack PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_pack PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_simple PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_simple PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(test_unpack PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(test_unpack PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    if(NOT MSVC)
        set_target_properties(test_memory_funcs PROPERTIES EXCLUDE_FROM_ALL TRUE)
        set_target_properties(test_memory_funcs PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    endif()
endif()
if(PNG_SHARED)
    set_target_properties(png16 PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(png16 PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
endif()
if(PNG_TESTS)
    set_target_properties(pngstest PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(pngstest PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(pngtest PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(pngtest PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
    set_target_properties(pngvalid PROPERTIES EXCLUDE_FROM_ALL TRUE)
    set_target_properties(pngvalid PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
endif()
set_target_properties(zlib PROPERTIES EXCLUDE_FROM_ALL TRUE)
set_target_properties(zlib PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD TRUE)
